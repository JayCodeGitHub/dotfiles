"use strict";var j=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ot=j(ge=>{"use strict";Object.defineProperty(ge,"__esModule",{value:!0});ge.binarySearch=void 0;function dn(t,e){let n=0,r=t.length-1;for(;n<=r;){let i=Math.floor((n+r)/2),o=t[i];if(o<e)n=i+1;else if(o>e)r=i-1;else{n=i,r=i;break}}return Math.max(Math.min(n,r,t.length-1),0)}ge.binarySearch=dn});var je=j(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.track=J.resetOffsetStack=J.offsetStack=J.setTracking=void 0;var st=!0,Le=0;function gn(t){st=t}J.setTracking=gn;function hn(){Le++}J.offsetStack=hn;function pn(){Le--}J.resetOffsetStack=pn;function mn(t,e=[]){return[new Proxy(t,{get(a,c,x){if(st){if(c==="push")return n;if(c==="pop")return r;if(c==="shift")return i;if(c==="unshift")return o;if(c==="splice")return u;if(c==="sort")return d;if(c==="reverse")return s}return Reflect.get(a,c,x)}}),e];function n(...a){return e.push({stack:f(),length:a.length}),t.push(...a)}function r(){if(e.length){let a=e[e.length-1];a.length>1?a.length--:e.pop()}return t.pop()}function i(){if(e.length){let a=e[0];a.length>1?a.length--:e.shift()}return t.shift()}function o(...a){return e.unshift({stack:f(),length:a.length}),t.unshift(...a)}function u(a,c,...x){c===void 0&&(c=t.length-a);let M=0,y;for(let m=0;m<e.length;m++){let S=e[m],O=M;if(M=O+S.length,a>=O){y=m+1;let F=S.length;S.length=a-O,e.splice(y,0,{stack:S.stack,length:F-S.length});break}}if(y===void 0)throw new Error("Invalid splice operation");let g=c;for(let m=y;m<e.length;m++){let S=e[m];for(;g>0&&S.length>0;)S.length--,g--;if(g===0)break}return e.splice(y,0,{stack:f(),length:x.length}),t.splice(a,c,...x)}function d(a){return e.splice(0,e.length,{stack:f(),length:t.length}),t.sort(a)}function s(){return e.splice(0,e.length,{stack:f(),length:t.length}),t.reverse()}function f(){let c=new Error().stack.split(`
`)[3+Le].trim();return c.endsWith(")")?c=c.slice(c.lastIndexOf("(")+1,-1):c=c.slice(c.lastIndexOf(" ")+1),c}}J.track=mn});var ct=j(at=>{"use strict";Object.defineProperty(at,"__esModule",{value:!0})});var pt=j(q=>{"use strict";var Sn=q&&q.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ut=q&&q.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Sn(e,t,n)};Object.defineProperty(q,"__esModule",{value:!0});q.replaceRange=q.replaceSourceRange=q.replaceAll=q.replace=q.create=q.toString=q.getLength=void 0;var ft=ot(),X=je();ut(ct(),q);ut(je(),q);function lt(t){let e=0;for(let n of t)e+=typeof n=="string"?n.length:n[0].length;return e}q.getLength=lt;function ke(t){return t.map(e=>typeof e=="string"?e:e[0]).join("")}q.toString=ke;function vn(t){return[[t,void 0,0]]}q.create=vn;function bn(t,e,...n){let i=ke(t).match(e);if(i&&i.index!==void 0){let o=i.index,u=o+i[0].length;(0,X.offsetStack)(),qe(t,o,u,...n.map(d=>typeof d=="function"?d(i[0]):d)),(0,X.resetOffsetStack)()}}q.replace=bn;function yn(t,e,...n){let r=ke(t),i=r.matchAll(e),o=r.length,u=0;for(let d of i)if(d.index!==void 0){let s=d.index+u,f=s+d[0].length;(0,X.offsetStack)(),qe(t,s,f,...n.map(c=>typeof c=="function"?c(d[0]):c)),(0,X.resetOffsetStack)();let a=lt(t);u+=a-o,o=a}}q.replaceAll=yn;function Fn(t,e,n,r,...i){for(let o of t)if(typeof o!="string"&&o[1]===e){let u=typeof o[2]=="number"?o[2]:o[2][0],d=typeof o[2]=="number"?o[2]+o[0].length:o[2][1];if(u<=n&&d>=r){let s=[];n>u&&s.push(gt(o,n-u));for(let f of i)s.push(f);return r<d&&s.push(ht(o,r-d)),dt(s),(0,X.offsetStack)(),t.splice(t.indexOf(o),1,...s),(0,X.resetOffsetStack)(),!0}}return!1}q.replaceSourceRange=Fn;function qe(t,e,n,...r){let i=_n(t),o=(0,ft.binarySearch)(i,e),u=(0,ft.binarySearch)(i,n),d=t[o],s=t[u],f=i[o],a=i[u],c=i[u]+(typeof s=="string"?s.length:s[0].length),x=[];e>f&&x.push(gt(d,e-f));for(let M of r)x.push(M);n<c&&x.push(ht(s,n-a)),dt(x),(0,X.offsetStack)(),t.splice(o,u-o+1,...x),(0,X.resetOffsetStack)()}q.replaceRange=qe;function dt(t){for(let e=t.length-1;e>=1;e--)typeof t[e]=="string"&&typeof t[e-1]=="string"&&(t[e-1]=t[e-1]+t[e],(0,X.offsetStack)(),t.splice(e,1),(0,X.resetOffsetStack)())}function gt(t,e){if(typeof t=="string")return t.slice(0,e);let n=t[0],r=t[2],i=n.slice(0,e),o=typeof r=="number"?r:[r[0],r[1]-(n.length-i.length)];return[i,t[1],o,...t.slice(3)]}function ht(t,e){if(typeof t=="string")return t.slice(e);let n=t[0],r=t[2],i=n.slice(e);e<0&&(e+=n.length);let o=typeof r=="number"?r+e:[r[0]+e,r[1]];return[i,t[1],o,...t.slice(3)]}function _n(t){let e=[],n=0;for(let r of t)e.push(n),n+=typeof r=="string"?r.length:r[0].length;return e}});var Ie=j(K=>{"use strict";var xn=K&&K.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),wn=K&&K.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&xn(e,t,n)};Object.defineProperty(K,"__esModule",{value:!0});K.buildStacks=K.buildMappings=K.SourceMap=void 0;wn(pt(),K);var Ve=class{get memo(){if(!this._memo){let n=function(r){let i=new Set;for(let d of e.mappings)i.add(d[r][0]),i.add(d[r][1]);let o=[...i].sort((d,s)=>d-s).map(d=>({offset:d,mappings:new Set}));for(let d of e.mappings){let s=u(d[r][0]),f=u(d[r][1]);for(let a=s;a<=f;a++)o[a].mappings.add(d)}return o;function u(d){let s=0,f=o.length-1;for(;s<=f;){let a=Math.floor((s+f)/2),c=o[a];if(c.offset<d)s=a+1;else if(c.offset>d)f=a-1;else return a}}},e=this;this._memo={sourceRange:n("sourceRange"),generatedRange:n("generatedRange")}}return this._memo}constructor(e){this.mappings=e}toSourceOffset(e,n=!1){for(let r of this.matching(e,"generatedRange","sourceRange",n))return r}toGeneratedOffset(e,n=!1){for(let r of this.matching(e,"sourceRange","generatedRange",n))return r}toSourceOffsets(e,n=!1){return this.matching(e,"generatedRange","sourceRange",n)}toGeneratedOffsets(e,n=!1){return this.matching(e,"sourceRange","generatedRange",n)}*matching(e,n,r,i){let o=this.memo[n];if(o.length===0)return;let{low:u,high:d}=this.binarySearchMemo(o,e),s=new Set;for(let f=u;f<=d;f++)for(let a of o[f].mappings){if(s.has(a))continue;s.add(a);let c=this.matchOffset(e,a[n],a[r],i);c!==void 0&&(yield[c,a])}}matchOffset(e,n,r,i){if(e>=n[0]&&e<=n[1]){let o=r[0]+e-n[0];if(i&&(o+=r[1]-r[0]-(n[1]-n[0])),o>=r[0]&&o<=r[1])return o}}binarySearchMemo(e,n){let r=0,i=e.length-1;for(;r<=i;){let o=Math.floor((r+i)/2),u=e[o];if(u.offset<n)r=o+1;else if(u.offset>n)i=o-1;else{r=o,i=o;break}}return{low:Math.max(Math.min(r,i,e.length-1),0),high:Math.min(Math.max(r,i,0),e.length-1)}}};K.SourceMap=Ve;function Pn(t){let e=0,n=[];for(let r of t)typeof r=="string"?e+=r.length:(n.push({generatedRange:[e,e+r[0].length],source:r[1],sourceRange:typeof r[2]=="number"?[r[2],r[2]+r[0].length]:r[2],data:r[3]}),e+=r[0].length);return n}K.buildMappings=Pn;function Cn(t,e){let n=0,r=0,i=[];for(let o of e){let u=n;for(let d=0;d<o.length;d++){let s=t[r+d];typeof s=="string"?n+=s.length:n+=s[0].length}r+=o.length,i.push({range:[u,n],source:o.stack})}return i}K.buildStacks=Cn});var ze=j(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.MirrorMap=void 0;var Mn=Ie(),We=class extends Mn.SourceMap{*findMirrorOffsets(e){for(let n of this.toGeneratedOffsets(e))yield[n[0],n[1].data[1]];for(let n of this.toSourceOffsets(e))yield[n[0],n[1].data[0]]}};he.MirrorMap=We});var Ke=j(ne=>{"use strict";Object.defineProperty(ne,"__esModule",{value:!0});ne.forEachEmbeddedFile=ne.updateVirtualFileMaps=ne.createVirtualFiles=void 0;var On=Ie(),An=ze();function Dn(t){let e=new Map,n=new Map,r=new WeakMap,i=new WeakMap;return{allSources(){return Array.from(e.values())},updateSource(f,a,c){let x=H(f),M=e.get(x);if(M)return M.languageId!==c?(this.deleteSource(f),this.updateSource(f,a,c)):(M.snapshot=a,o(M),M.language.updateVirtualFile(M.root,a),u(M),M.root);for(let y of t){let g=y.createVirtualFile(f,a,c);if(g){let m={fileName:f,languageId:c,snapshot:a,root:g,language:y};return e.set(x,m),u(m),g}}},deleteSource(f){let a=H(f),c=e.get(a);c&&(c.language.deleteVirtualFile?.(c.root),e.delete(a),o(c))},getSource(f){let a=H(f);return e.get(a)},hasSource:f=>e.has(H(f)),getMirrorMap:s,getMaps:d,hasVirtualFile(f){return!!n.get(H(f))},getVirtualFile(f){let a=n.get(H(f));return a?[a.virtualFile,a.source]:[void 0,void 0]}};function o(f){pe(f.root,a=>{n.delete(H(a.fileName))})}function u(f){pe(f.root,a=>{n.set(H(a.fileName),{virtualFile:a,source:f})})}function d(f){return r.has(f.snapshot)||r.set(f.snapshot,new Map),mt(f,a=>{if(a){let c=e.get(H(a));return[a,c.snapshot]}else{let c=n.get(H(f.fileName)).source;return[c.fileName,c.snapshot]}},r.get(f.snapshot)),r.get(f.snapshot)}function s(f){return i.has(f.snapshot)||i.set(f.snapshot,f.mirrorBehaviorMappings?new An.MirrorMap(f.mirrorBehaviorMappings):void 0),i.get(f.snapshot)}}ne.createVirtualFiles=Dn;function mt(t,e,n=new Map){let r=new Set;for(let i of t.mappings){if(r.has(i.source))continue;r.add(i.source);let o=e(i.source);o&&(!n.has(o[0])||n.get(o[0])[0]!==o[1])&&n.set(o[0],[o[1],new On.SourceMap(t.mappings.filter(u=>u.source===i.source))])}return n}ne.updateVirtualFileMaps=mt;function pe(t,e){e(t);for(let n of t.embeddedFiles)pe(n,e)}ne.forEachEmbeddedFile=pe;function H(t){return t.replace(/\\/g,"/").toLowerCase()}});var St=j(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.createLanguageContext=void 0;var Rn=Ke();function Tn(t,e){let n=t,r=new Map,i,o=(0,Rn.createVirtualFiles)(e);for(let d of e.reverse())if(d.resolveHost){let s=n,f=d.resolveHost(n);f===s&&(console.warn("[volar] language.resolveHost() should not return the same host instance."),f={...f}),n=new Proxy(f,{get(a,c){return c in a?a[c]:s[c]}})}return{rawHost:t,host:n,virtualFiles:new Proxy(o,{get:(d,s)=>(u(),d[s])})};function u(){let d=n.getProjectVersion();if(!(d!==i))return;let f=new Map,a=new Set(r.keys());for(let c of n.getScriptFileNames())f.set(c,n.getScriptSnapshot(c));for(let[c,x]of f)a.delete(c),r.get(c)!==f.get(c)&&(x?o.updateSource(c,x,n.getLanguageId?.(c)):o.deleteSource(c));for(let c of a)o.deleteSource(c);r=f,i=d}}me.createLanguageContext=Tn});var _t=j(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.FileKind=Q.MirrorBehaviorCapabilities=Q.FileRangeCapabilities=Q.FileCapabilities=void 0;var vt;(function(t){t.full={diagnostic:!0,foldingRange:!0,documentFormatting:!0,documentSymbol:!0,codeAction:!0,inlayHint:!0}})(vt||(Q.FileCapabilities=vt={}));var bt;(function(t){t.full={hover:!0,references:!0,definition:!0,rename:!0,completion:!0,diagnostic:!0,semanticTokens:!0}})(bt||(Q.FileRangeCapabilities=bt={}));var yt;(function(t){t.full={references:!0,definition:!0,rename:!0}})(yt||(Q.MirrorBehaviorCapabilities=yt={}));var Ft;(function(t){t[t.TextFile=0]="TextFile",t[t.TypeScriptHostFile=1]="TypeScriptHostFile"})(Ft||(Q.FileKind=Ft={}))});var oe=j(Y=>{"use strict";var En=Y&&Y.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Se=Y&&Y.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&En(e,t,n)};Object.defineProperty(Y,"__esModule",{value:!0});Se(Ke(),Y);Se(St(),Y);Se(ze(),Y);Se(_t(),Y)});var wt=j(ve=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.getDocumentRegistry=void 0;var xt=[];function Ln(t,e,n){let r=xt.find(i=>i[0]===e&&i[1]===n)?.[2];return r||(r=t.createDocumentRegistry(e,n),xt.push([e,n,r])),r}ve.getDocumentRegistry=Ln});var Pt=j(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.decorateLanguageService=void 0;var be=oe();function jn(t,e,n){let r=e.organizeImports.bind(e),i=e.getDefinitionAtPosition.bind(e),o=e.getDefinitionAndBoundSpan.bind(e),u=e.getTypeDefinitionAtPosition.bind(e),d=e.getImplementationAtPosition.bind(e),s=e.getFileReferences.bind(e),f=e.findRenameLocations.bind(e),a=e.getReferencesAtPosition.bind(e),c=e.findReferences.bind(e);e.organizeImports=x,e.getDefinitionAtPosition=g,e.getDefinitionAndBoundSpan=F,e.getTypeDefinitionAtPosition=m,e.getImplementationAtPosition=S,e.findRenameLocations=O,e.getReferencesAtPosition=M,e.getFileReferences=y,e.findReferences=v;function x(w,A,P){let D=[],T=t.getSource(w.fileName)?.root;if(T)(0,be.forEachEmbeddedFile)(T,L=>{L.kind===be.FileKind.TypeScriptHostFile&&L.capabilities.codeAction&&(D=D.concat(r({...w,fileName:L.fileName},A,P)))});else return r(w,A,P);return D.map(h).filter(se)}function M(w,A){return l(w,A,"references")}function y(w){return l(w,-1,"fileReferences")}function g(w,A){return l(w,A,"definition")}function m(w,A){return l(w,A,"typeDefinition")}function S(w,A){return l(w,A,"implementation")}function O(w,A,P,D,T){return l(w,A,"rename",P,D,T)}function l(w,A,P,D=!1,T=!1,L){let I=new Set,W=[];return G(w,A),W.map(k=>b(k,P==="definition")).filter(se);function G(k,z){if(I.has(k+":"+z))return;I.add(k+":"+z);let te=P==="definition"?i(k,z):P==="typeDefinition"?u(k,z):P==="references"?a(k,z):P==="fileReferences"?s(k):P==="implementation"?d(k,z):P==="rename"&&L?f(k,z,D,T,L):void 0;if(te){W=W.concat(te);for(let B of te){I.add(B.fileName+":"+B.textSpan.start);let[ie]=C(B.fileName);if(!ie)continue;let rt=t.getMirrorMap(ie);if(rt)for(let[it,Ee]of rt.findMirrorOffsets(B.textSpan.start))(P==="definition"||P==="typeDefinition"||P==="implementation")&&!Ee.definition||P==="references"&&!Ee.references||P==="rename"&&!Ee.rename||I.has(B.fileName+":"+it)||G(B.fileName,it)}}}}function F(w,A){let P=new Set,D,T=[];if(L(w,A),!D)return;return{textSpan:D,definitions:T?.map(I=>b(I,!0)).filter(se)};function L(I,W){if(P.has(I+":"+W))return;P.add(I+":"+W);let G=o(I,W);if(G&&(D||(D=G.textSpan),!!G.definitions)){T=T.concat(G.definitions);for(let k of G.definitions){P.add(k.fileName+":"+k.textSpan.start);let[z]=C(k.fileName);if(!z)continue;let te=t.getMirrorMap(z);if(te)for(let[B,ie]of te.findMirrorOffsets(k.textSpan.start))ie.definition&&(P.has(k.fileName+":"+B)||L(k.fileName,B))}}}}function v(w,A){let P=new Set,D=[];return T(w,A),D.map(L=>p(L)).filter(se);function T(L,I){if(P.has(L+":"+I))return;P.add(L+":"+I);let W=c(L,I);if(W){D=D.concat(W);for(let G of W)for(let k of G.references){P.add(k.fileName+":"+k.textSpan.start);let[z]=C(k.fileName);if(!z)continue;let te=t.getMirrorMap(z);if(te)for(let[B,ie]of te.findMirrorOffsets(k.textSpan.start))ie.references&&(P.has(k.fileName+":"+B)||T(k.fileName,B))}}}}function h(w){let[A,P]=C(w.fileName);return P?{...w,fileName:P.fileName,textChanges:w.textChanges.map(D=>{let T=_(w.fileName,D.span);if(T)return{...D,span:T.textSpan}}).filter(se)}:w}function p(w){let A=b(w.definition,!1),P=w.references.map(D=>b(D,!1)).filter(se);if(A)return{definition:A,references:P};if(P.length)return{definition:{...w.definition,fileName:P[0].fileName,textSpan:P[0].textSpan},references:P}}function b(w,A){let P=_(w.fileName,w.textSpan);if(A&&!P){let[I,W]=C(w.fileName);I&&W&&(P={fileName:W.fileName,textSpan:{start:0,length:0}})}if(!P)return;let D=_(w.fileName,w.contextSpan),T=_(w.originalFileName,w.originalTextSpan),L=_(w.originalFileName,w.originalContextSpan);return{...w,fileName:P.fileName,textSpan:P.textSpan,contextSpan:D?.textSpan,originalFileName:T?.fileName,originalTextSpan:T?.textSpan,originalContextSpan:L?.textSpan}}function _(w,A){if(!w||!A)return;let[P,D]=C(w);if(P&&D){n&&(A={start:A.start-D.snapshot.getLength(),length:A.length});for(let[T,[L,I]]of t.getMaps(P)){if(D.snapshot!==L)continue;let W=I.toSourceOffset(A.start);if(W)return{fileName:D.fileName,textSpan:{start:W[0],length:A.length}}}}else return{fileName:w,textSpan:A}}function C(w){if(n){let A,P=t.getSource(w);return P&&(0,be.forEachEmbeddedFile)(P.root,D=>{let T=D.fileName.replace(w,"");D.kind===be.FileKind.TypeScriptHostFile&&(T===".d.ts"||T.match(/^\.(js|ts)x?$/))&&(A=D)}),[A,P]}else return t.getVirtualFile(w)}}ye.decorateLanguageService=jn;function se(t){return t!=null}});var Ue=j((di,Mt)=>{"use strict";function Z(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}function Ct(t,e){for(var n="",r=0,i=-1,o=0,u,d=0;d<=t.length;++d){if(d<t.length)u=t.charCodeAt(d);else{if(u===47)break;u=47}if(u===47){if(!(i===d-1||o===1))if(i!==d-1&&o===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){var s=n.lastIndexOf("/");if(s!==n.length-1){s===-1?(n="",r=0):(n=n.slice(0,s),r=n.length-1-n.lastIndexOf("/")),i=d,o=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=d,o=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/"+t.slice(i+1,d):n=t.slice(i+1,d),r=d-i-1;i=d,o=0}else u===46&&o!==-1?++o:o=-1}return n}function kn(t,e){var n=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return n?n===e.root?n+r:n+t+r:r}var ae={resolve:function(){for(var e="",n=!1,r,i=arguments.length-1;i>=-1&&!n;i--){var o;i>=0?o=arguments[i]:(r===void 0&&(r=process.cwd()),o=r),Z(o),o.length!==0&&(e=o+"/"+e,n=o.charCodeAt(0)===47)}return e=Ct(e,!n),n?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(Z(e),e.length===0)return".";var n=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=Ct(e,!n),e.length===0&&!n&&(e="."),e.length>0&&r&&(e+="/"),n?"/"+e:e},isAbsolute:function(e){return Z(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,n=0;n<arguments.length;++n){var r=arguments[n];Z(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":ae.normalize(e)},relative:function(e,n){if(Z(e),Z(n),e===n||(e=ae.resolve(e),n=ae.resolve(n),e===n))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var i=e.length,o=i-r,u=1;u<n.length&&n.charCodeAt(u)===47;++u);for(var d=n.length,s=d-u,f=o<s?o:s,a=-1,c=0;c<=f;++c){if(c===f){if(s>f){if(n.charCodeAt(u+c)===47)return n.slice(u+c+1);if(c===0)return n.slice(u+c)}else o>f&&(e.charCodeAt(r+c)===47?a=c:c===0&&(a=0));break}var x=e.charCodeAt(r+c),M=n.charCodeAt(u+c);if(x!==M)break;x===47&&(a=c)}var y="";for(c=r+a+1;c<=i;++c)(c===i||e.charCodeAt(c)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+n.slice(u+a):(u+=a,n.charCodeAt(u)===47&&++u,n.slice(u))},_makeLong:function(e){return e},dirname:function(e){if(Z(e),e.length===0)return".";for(var n=e.charCodeAt(0),r=n===47,i=-1,o=!0,u=e.length-1;u>=1;--u)if(n=e.charCodeAt(u),n===47){if(!o){i=u;break}}else o=!1;return i===-1?r?"/":".":r&&i===1?"//":e.slice(0,i)},basename:function(e,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');Z(e);var r=0,i=-1,o=!0,u;if(n!==void 0&&n.length>0&&n.length<=e.length){if(n.length===e.length&&n===e)return"";var d=n.length-1,s=-1;for(u=e.length-1;u>=0;--u){var f=e.charCodeAt(u);if(f===47){if(!o){r=u+1;break}}else s===-1&&(o=!1,s=u+1),d>=0&&(f===n.charCodeAt(d)?--d===-1&&(i=u):(d=-1,i=s))}return r===i?i=s:i===-1&&(i=e.length),e.slice(r,i)}else{for(u=e.length-1;u>=0;--u)if(e.charCodeAt(u)===47){if(!o){r=u+1;break}}else i===-1&&(o=!1,i=u+1);return i===-1?"":e.slice(r,i)}},extname:function(e){Z(e);for(var n=-1,r=0,i=-1,o=!0,u=0,d=e.length-1;d>=0;--d){var s=e.charCodeAt(d);if(s===47){if(!o){r=d+1;break}continue}i===-1&&(o=!1,i=d+1),s===46?n===-1?n=d:u!==1&&(u=1):n!==-1&&(u=-1)}return n===-1||i===-1||u===0||u===1&&n===i-1&&n===r+1?"":e.slice(n,i)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return kn("/",e)},parse:function(e){Z(e);var n={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return n;var r=e.charCodeAt(0),i=r===47,o;i?(n.root="/",o=1):o=0;for(var u=-1,d=0,s=-1,f=!0,a=e.length-1,c=0;a>=o;--a){if(r=e.charCodeAt(a),r===47){if(!f){d=a+1;break}continue}s===-1&&(f=!1,s=a+1),r===46?u===-1?u=a:c!==1&&(c=1):u!==-1&&(c=-1)}return u===-1||s===-1||c===0||c===1&&u===s-1&&u===d+1?s!==-1&&(d===0&&i?n.base=n.name=e.slice(1,s):n.base=n.name=e.slice(d,s)):(d===0&&i?(n.name=e.slice(1,u),n.base=e.slice(1,s)):(n.name=e.slice(d,u),n.base=e.slice(d,s)),n.ext=e.slice(u,s)),d>0?n.dir=e.slice(0,d-1):i&&(n.dir="/"),n},sep:"/",delimiter:":",win32:null,posix:null};ae.posix=ae;Mt.exports=ae});var Be=j(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.startsWith=R.createGetCanonicalFileName=R.stringContains=R.endsWith=R.getStringComparer=R.compareStringsCaseSensitive=R.equateStringsCaseSensitive=R.equateStringsCaseInsensitive=R.last=R.lastOrUndefined=R.sort=R.some=R.flatMap=R.flatten=R.map=R.indexOfAnyCharCode=R.findIndex=R.every=void 0;var qn=[];function Vn(t,e){if(t){for(let n=0;n<t.length;n++)if(!e(t[n],n))return!1}return!0}R.every=Vn;function In(t,e,n){if(t===void 0)return-1;for(let r=n??0;r<t.length;r++)if(e(t[r],r))return r;return-1}R.findIndex=In;function Wn(t,e,n=Tt){if(t){for(let r of t)if(n(r,e))return!0}return!1}function zn(t,e,n){for(let r=n||0;r<t.length;r++)if(Wn(e,t.charCodeAt(r)))return r;return-1}R.indexOfAnyCharCode=zn;function Kn(t,e){let n;if(t){n=[];for(let r=0;r<t.length;r++)n.push(e(t[r],r))}return n}R.map=Kn;function Un(t){let e=[];for(let n of t)n&&(Rt(n)?Dt(e,n):e.push(n));return e}R.flatten=Un;function Bn(t,e){let n;if(t)for(let r=0;r<t.length;r++){let i=e(t[r],r);i&&(Rt(i)?n=Dt(n,i):n=$n(n,i))}return n||qn}R.flatMap=Bn;function Nn(t,e){if(t)if(e){for(let n of t)if(e(n))return!0}else return t.length>0;return!1}R.some=Nn;function $n(t,e){return e===void 0?t:t===void 0?[e]:(t.push(e),t)}function Ot(t,e){return e<0?t.length+e:e}function Dt(t,e,n,r){if(e===void 0||e.length===0)return t;if(t===void 0)return e.slice(n,r);n=n===void 0?0:Ot(e,n),r=r===void 0?e.length:Ot(e,r);for(let i=n;i<r&&i<e.length;i++)e[i]!==void 0&&t.push(e[i]);return t}function Gn(t,e){return t.length===0?t:t.slice().sort(e)}R.sort=Gn;function Jn(t){return t===void 0||t.length===0?void 0:t[t.length-1]}R.lastOrUndefined=Jn;function Xn(t){return t[t.length-1]}R.last=Xn;function Rt(t){return Array.isArray?Array.isArray(t):t instanceof Array}function Hn(t){return t}function Qn(t){return t.toLowerCase()}var At=/[^\u0130\u0131\u00DFa-z0-9\\/:\-_\. ]+/g;function Yn(t){return At.test(t)?t.replace(At,Qn):t}function Tt(t,e){return t===e}function Zn(t,e){return t===e||t!==void 0&&e!==void 0&&t.toUpperCase()===e.toUpperCase()}R.equateStringsCaseInsensitive=Zn;function er(t,e){return Tt(t,e)}R.equateStringsCaseSensitive=er;function tr(t,e){return t===e?0:t===void 0?-1:e===void 0?1:t<e?-1:1}function nr(t,e){return t===e?0:t===void 0?-1:e===void 0?1:(t=t.toUpperCase(),e=e.toUpperCase(),t<e?-1:t>e?1:0)}function Et(t,e){return tr(t,e)}R.compareStringsCaseSensitive=Et;function rr(t){return t?nr:Et}R.getStringComparer=rr;function ir(t,e){let n=t.length-e.length;return n>=0&&t.indexOf(e,n)===n}R.endsWith=ir;function or(t,e){return t.indexOf(e)!==-1}R.stringContains=or;function sr(t){return t?Hn:Yn}R.createGetCanonicalFileName=sr;function ar(t,e){return t.lastIndexOf(e,0)===0}R.startsWith=ar});var Wt=j(E=>{"use strict";Object.defineProperty(E,"__esModule",{value:!0});E.containsPath=E.removeTrailingDirectorySeparator=E.normalizePath=E.getNormalizedPathComponents=E.combinePaths=E.getDirectoryPath=E.fileExtensionIsOneOf=E.hasExtension=E.isRootedDiskPath=E.directorySeparator=void 0;var ee=Be();E.directorySeparator="/";var cr="\\",Lt="://",fr=/\\/g;function ur(t){return t===47||t===92}function lr(t){return Vt(t)>0}E.isRootedDiskPath=lr;function dr(t){return(0,ee.stringContains)(It(t),".")}E.hasExtension=dr;function gr(t,e){return t.length>e.length&&(0,ee.endsWith)(t,e)}function hr(t,e){for(let n of e)if(gr(t,n))return!0;return!1}E.fileExtensionIsOneOf=hr;function Ne(t){return t.length>0&&ur(t.charCodeAt(t.length-1))}function jt(t){return t>=97&&t<=122||t>=65&&t<=90}function pr(t,e){let n=t.charCodeAt(e);if(n===58)return e+1;if(n===37&&t.charCodeAt(e+1)===51){let r=t.charCodeAt(e+2);if(r===97||r===65)return e+3}return-1}function Vt(t){if(!t)return 0;let e=t.charCodeAt(0);if(e===47||e===92){if(t.charCodeAt(1)!==e)return 1;let r=t.indexOf(e===47?E.directorySeparator:cr,2);return r<0?t.length:r+1}if(jt(e)&&t.charCodeAt(1)===58){let r=t.charCodeAt(2);if(r===47||r===92)return 3;if(t.length===2)return 2}let n=t.indexOf(Lt);if(n!==-1){let r=n+Lt.length,i=t.indexOf(E.directorySeparator,r);if(i!==-1){let o=t.slice(0,n),u=t.slice(r,i);if(o==="file"&&(u===""||u==="localhost")&&jt(t.charCodeAt(i+1))){let d=pr(t,i+2);if(d!==-1){if(t.charCodeAt(d)===47)return~(d+1);if(d===t.length)return~d}}return~(i+1)}return~t.length}return 0}function le(t){let e=Vt(t);return e<0?~e:e}function mr(t){t=de(t);let e=le(t);return e===t.length?t:(t=we(t),t.slice(0,Math.max(e,t.lastIndexOf(E.directorySeparator))))}E.getDirectoryPath=mr;function It(t,e,n){if(t=de(t),le(t)===t.length)return"";t=we(t);let i=t.slice(Math.max(le(t),t.lastIndexOf(E.directorySeparator)+1)),o=e!==void 0&&n!==void 0?vr(i,e,n):void 0;return o?i.slice(0,i.length-o.length):i}function kt(t,e,n){if((0,ee.startsWith)(e,".")||(e="."+e),t.length>=e.length&&t.charCodeAt(t.length-e.length)===46){let r=t.slice(t.length-e.length);if(n(r,e))return r}}function Sr(t,e,n){if(typeof e=="string")return kt(t,e,n)||"";for(let r of e){let i=kt(t,r,n);if(i)return i}return""}function vr(t,e,n){if(e)return Sr(we(t),e,n?ee.equateStringsCaseInsensitive:ee.equateStringsCaseSensitive);let r=It(t),i=r.lastIndexOf(".");return i>=0?r.substring(i):""}function br(t,e){let n=t.substring(0,e),r=t.substring(e).split(E.directorySeparator);return r.length&&!(0,ee.lastOrUndefined)(r)&&r.pop(),[n,...r]}function Fe(t,e=""){return t=xe(e,t),br(t,le(t))}function yr(t){return t.length===0?"":(t[0]&&$e(t[0]))+t.slice(1).join(E.directorySeparator)}function de(t){return t.indexOf("\\")!==-1?t.replace(fr,E.directorySeparator):t}function _e(t){if(!(0,ee.some)(t))return[];let e=[t[0]];for(let n=1;n<t.length;n++){let r=t[n];if(r&&r!=="."){if(r===".."){if(e.length>1){if(e[e.length-1]!==".."){e.pop();continue}}else if(e[0])continue}e.push(r)}}return e}function xe(t,...e){t&&(t=de(t));for(let n of e)n&&(n=de(n),!t||le(n)!==0?t=n:t=$e(t)+n);return t}E.combinePaths=xe;function Fr(t,e){return _e(Fe(t,e))}E.getNormalizedPathComponents=Fr;function _r(t){if(t=de(t),!qt.test(t))return t;let e=t.replace(/\/\.\//g,"/").replace(/^\.\//,"");if(e!==t&&(t=e,!qt.test(t)))return t;let n=yr(_e(Fe(t)));return n&&Ne(t)?$e(n):n}E.normalizePath=_r;function we(t){return Ne(t)?t.substr(0,t.length-1):t}E.removeTrailingDirectorySeparator=we;function $e(t){return Ne(t)?t:t+E.directorySeparator}var qt=/(?:\/\/)|(?:^|\/)\.\.?(?:$|\/)/;function xr(t,e,n,r){if(typeof n=="string"?(t=xe(n,t),e=xe(n,e)):typeof n=="boolean"&&(r=n),t===void 0||e===void 0)return!1;if(t===e)return!0;let i=_e(Fe(t)),o=_e(Fe(e));if(o.length<i.length)return!1;let u=r?ee.equateStringsCaseInsensitive:ee.equateStringsCaseSensitive;for(let d=0;d<i.length;d++)if(!(d===0?ee.equateStringsCaseInsensitive:u)(i[d],o[d]))return!1;return!0}E.containsPath=xr});var Qe=j(Pe=>{"use strict";Object.defineProperty(Pe,"__esModule",{value:!0});Pe.matchFiles=void 0;var U=Be(),V=Wt(),zt=/[^\w\s\/]/g,wr=[42,63],Pr=["node_modules","bower_components","jspm_packages"],Xe=`(?!(${Pr.join("|")})(/|$))`,Kt={singleAsteriskRegexFragment:"([^./]|(\\.(?!min\\.js$))?)*",doubleAsteriskRegexFragment:`(/${Xe}[^/.][^/]*)*?`,replaceWildcardCharacter:t=>He(t,Kt.singleAsteriskRegexFragment)},Ut={singleAsteriskRegexFragment:"[^/]*",doubleAsteriskRegexFragment:`(/${Xe}[^/.][^/]*)*?`,replaceWildcardCharacter:t=>He(t,Ut.singleAsteriskRegexFragment)},Bt={singleAsteriskRegexFragment:"[^/]*",doubleAsteriskRegexFragment:"(/.+?)?",replaceWildcardCharacter:t=>He(t,Bt.singleAsteriskRegexFragment)},Cr={files:Kt,directories:Ut,exclude:Bt};function Ge(t,e,n){let r=Nt(t,e,n);return!r||!r.length?void 0:`^(${r.map(u=>`(${u})`).join("|")})${n==="exclude"?"($|/)":"$"}`}function Nt(t,e,n){if(!(t===void 0||t.length===0))return(0,U.flatMap)(t,r=>r&&Or(r,e,n,Cr[n]))}function Mr(t){return!/[.*?]/.test(t)}function Or(t,e,n,{singleAsteriskRegexFragment:r,doubleAsteriskRegexFragment:i,replaceWildcardCharacter:o}){let u="",d=!1,s=(0,V.getNormalizedPathComponents)(t,e),f=(0,U.last)(s);if(n!=="exclude"&&f==="**")return;s[0]=(0,V.removeTrailingDirectorySeparator)(s[0]),Mr(f)&&s.push("**","*");let a=0;for(let c of s){if(c==="**")u+=i;else if(n==="directories"&&(u+="(",a++),d&&(u+=V.directorySeparator),n!=="exclude"){let x="";c.charCodeAt(0)===42?(x+="([^./]"+r+")?",c=c.substr(1)):c.charCodeAt(0)===63&&(x+="[^./]",c=c.substr(1)),x+=c.replace(zt,o),x!==c&&(u+=Xe),u+=x}else u+=c.replace(zt,o);d=!0}for(;a>0;)u+=")?",a--;return u}function He(t,e){return t==="*"?e:t==="?"?"[^/]":"\\"+t}function Ar(t,e,n,r,i){t=(0,V.normalizePath)(t),i=(0,V.normalizePath)(i);let o=(0,V.combinePaths)(i,t);return{includeFilePatterns:(0,U.map)(Nt(n,o,"files"),u=>`^${u}$`),includeFilePattern:Ge(n,o,"files"),includeDirectoryPattern:Ge(n,o,"directories"),excludePattern:Ge(e,o,"exclude"),basePaths:Rr(t,n,r)}}function Je(t,e){return new RegExp(t,e?"":"i")}function Dr(t,e,n,r,i,o,u,d,s){t=(0,V.normalizePath)(t),o=(0,V.normalizePath)(o);let f=Ar(t,n,r,i,o),a=f.includeFilePatterns&&f.includeFilePatterns.map(S=>Je(S,i)),c=f.includeDirectoryPattern&&Je(f.includeDirectoryPattern,i),x=f.excludePattern&&Je(f.excludePattern,i),M=a?a.map(()=>[]):[[]],y=new Map,g=(0,U.createGetCanonicalFileName)(i);for(let S of f.basePaths)m(S,(0,V.combinePaths)(o,S),u);return(0,U.flatten)(M);function m(S,O,l){let F=g(s(O));if(y.has(F))return;y.set(F,!0);let{files:v,directories:h}=d(S);for(let p of(0,U.sort)(v,U.compareStringsCaseSensitive)){let b=(0,V.combinePaths)(S,p),_=(0,V.combinePaths)(O,p);if(!(e&&!(0,V.fileExtensionIsOneOf)(b,e))&&!(x&&x.test(_)))if(!a)M[0].push(b);else{let C=(0,U.findIndex)(a,w=>w.test(_));C!==-1&&M[C].push(b)}}if(!(l!==void 0&&(l--,l===0)))for(let p of(0,U.sort)(h,U.compareStringsCaseSensitive)){let b=(0,V.combinePaths)(S,p),_=(0,V.combinePaths)(O,p);(!c||c.test(_))&&(!x||!x.test(_))&&m(b,_,l)}}}Pe.matchFiles=Dr;function Rr(t,e,n){let r=[t];if(e){let i=[];for(let o of e){let u=(0,V.isRootedDiskPath)(o)?o:(0,V.normalizePath)((0,V.combinePaths)(t,o));i.push(Tr(u))}i.sort((0,U.getStringComparer)(!n));for(let o of i)(0,U.every)(r,u=>!(0,V.containsPath)(u,o,t,!n))&&r.push(o)}return r}function Tr(t){let e=(0,U.indexOfAnyCharCode)(t,wr);return e<0?(0,V.hasExtension)(t)?(0,V.removeTrailingDirectorySeparator)((0,V.getDirectoryPath)(t)):t:t.substring(0,t.lastIndexOf(V.directorySeparator,e))}});var Xt=j(Ce=>{"use strict";Object.defineProperty(Ce,"__esModule",{value:!0});Ce.createLanguageServiceHost=void 0;var $t=Ue(),Er=Qe(),Ye=new Map;function Lr(t,e,n){let r,i=0,o=[],u=new Set,d={...n,getCurrentDirectory:()=>t.host.workspacePath,getCompilationSettings:()=>t.host.getCompilationSettings(),getCancellationToken:t.host.getCancellationToken?()=>t.host.getCancellationToken():void 0,getLocalizedDiagnosticMessages:t.host.getLocalizedDiagnosticMessages?()=>t.host.getLocalizedDiagnosticMessages():void 0,getProjectReferences:t.host.getProjectReferences?()=>t.host.getProjectReferences():void 0,getDefaultLibFileName:l=>{try{return e.getDefaultLibFilePath(l)}catch{return`/node_modules/typescript/lib/${e.getDefaultLibFileName(l)}`}},useCaseSensitiveFileNames:()=>n.useCaseSensitiveFileNames,getNewLine:()=>n.newLine,readFile:l=>{let F=g(l);if(F)return F.getText(0,F.getLength())},readDirectory:x,getDirectories:M,directoryExists:S,fileExists:O,getProjectVersion:()=>i+":"+n.version,getTypeRootsVersion:()=>n.version??-1,getScriptFileNames:()=>o,getScriptVersion:m,getScriptSnapshot:g,getScriptKind(l){if(e){if(t.virtualFiles.hasSource(l))return e.ScriptKind.Deferred;switch($t.extname(l)){case".js":return e.ScriptKind.JS;case".cjs":return e.ScriptKind.JS;case".mjs":return e.ScriptKind.JS;case".jsx":return e.ScriptKind.JSX;case".ts":return e.ScriptKind.TS;case".cts":return e.ScriptKind.TS;case".mts":return e.ScriptKind.TS;case".tsx":return e.ScriptKind.TSX;case".json":return e.ScriptKind.JSON;default:return e.ScriptKind.Unknown}}return 0}},s=new Map;if(t.host.resolveModuleName){let l=e.createModuleResolutionCache(d.getCurrentDirectory(),d.useCaseSensitiveFileNames?v=>v:v=>v.toLowerCase(),d.getCompilationSettings()),F=n.version;d.resolveModuleNameLiterals=(v,h,p,b,_)=>(F!==n.version&&(F=n.version,l.clear()),v.map(C=>{let w=C.text;return w=t.host.resolveModuleName(w,_.impliedNodeFormat),e.resolveModuleName(w,h,b,d,l,p,_.impliedNodeFormat)})),d.resolveModuleNames=(v,h,p,b,_,C)=>(F!==n.version&&(F=n.version,l.clear()),v.map(w=>(w=t.host.resolveModuleName(w,C?.impliedNodeFormat),e.resolveModuleName(w,h,_,d,l,b,C?.impliedNodeFormat).resolvedModule)))}let f=new Set,a=new Set;return new Proxy(d,{get:(l,F)=>(c(),l[F])});function c(){let l=t.host.getProjectVersion();if(!(l!==r))return;r=l;let v=new Set,h=new Set;for(let{root:b}of t.virtualFiles.allSources())Ze(b,_=>{_.kind===1?v.add(_.snapshot):h.add(_.snapshot)});Gt(f,v)?Gt(a,h)&&i++:i++,f=v,a=h;let p=new Set;for(let{root:b}of t.virtualFiles.allSources())Ze(b,_=>{_.kind===1&&p.add(_.fileName)});for(let b of t.host.getScriptFileNames())t.virtualFiles.hasSource(b)||p.add(b);o=[...p],u.clear();for(let b of o)u.add($t.dirname(Jt(b)))}function x(l,F,v,h,p){let b=(0,Er.matchFiles)(l,F,v,h,n?.useCaseSensitiveFileNames??!1,t.host.workspacePath,p,_=>{let C=[];for(let w of o)if(w.toLowerCase().startsWith(_.toLowerCase())){let A=w.substring(_.length);A.indexOf("/")===-1&&C.push(A)}return{files:C,directories:y(_)}},n?.realpath?_=>n.realpath(_):_=>_);return b=b.map(_=>{let[C,w]=t.virtualFiles.getVirtualFile(_);return w?w.fileName:_}),[...new Set([...b,...n.readDirectory(l,F,v,h,p)])]}function M(l){return[...new Set([...y(l),...n.getDirectories(l)])]}function y(l){let F=new Set;for(let v of o)if(v.toLowerCase().startsWith(l.toLowerCase())){let h=v.substring(l.length);h.indexOf("/")>=0&&F.add(h.split("/")[0])}return[...F]}function g(l){let[F]=t.virtualFiles.getVirtualFile(l);if(F)return F.snapshot;let v=t.host.getScriptSnapshot(l);if(v)return v;let h=s.get(l),p=n.getModifiedTime?.(l)?.valueOf();if(!h||h[0]!==p)if(n.fileExists(l)){let b=n.readFile(l),_=b!==void 0?e.ScriptSnapshot.fromString(b):void 0;s.set(l,[p,_])}else s.set(l,[p,void 0]);return s.get(l)?.[1]}function m(l){let[F]=t.virtualFiles.getVirtualFile(l),v=F?.snapshot??t.host.getScriptSnapshot(l);if(v){Ye.has(l)||Ye.set(l,{lastVersion:0,snapshotVersions:new WeakMap});let h=Ye.get(l);return h.snapshotVersions.has(v)||h.snapshotVersions.set(v,h.lastVersion++),h.snapshotVersions.get(v).toString()}return n.getModifiedTime?.(l)?.valueOf().toString()??""}function S(l){return u.has(Jt(l))||n.directoryExists(l)}function O(l){let F=l.substring(l.lastIndexOf("."));if(F===".js"||F===".ts"||F===".jsx"||F===".tsx"){let v=l.substring(0,l.lastIndexOf("."));if(!t.virtualFiles.hasSource(v)){let h=g(v);h&&t.virtualFiles.updateSource(v,h,t.host.getLanguageId?.(v))}}return t.virtualFiles.hasVirtualFile(l)||t.host.getScriptSnapshot(l)?!0:!!n.fileExists(l)}}Ce.createLanguageServiceHost=Lr;function Gt(t,e){if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0}function Ze(t,e){e(t);for(let n of t.embeddedFiles)Ze(n,e)}function Jt(t){return t.replace(/\\/g,"/").toLowerCase()}});var Qt=j(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.createSys=void 0;var $=Ue(),jr=Qe(),Ht="";function kr(t,e){let n=0,r=e.uriToFileName(e.workspaceUri.toString()),i=t.sys,o={dirs:new Map,files:new Map,requestedRead:!1},u=new Set,d=e.onDidChangeWatchedFiles?.(({changes:h})=>{for(let p of h){let b=e.uriToFileName(p.uri),_=$.dirname(b),C=$.basename(b),w=F(_);w.files.has(C)&&(n++,p.type===1||p.type===2?w.files.set(C,{stat:{type:1,ctime:Date.now(),mtime:Date.now(),size:-1},requestedStat:!1}):p.type===3&&w.files.set(C,{stat:void 0,text:void 0,requestedStat:!0,requestedText:!0}))}});return{get version(){return n},dispose(){d?.dispose()},args:i?.args??[],newLine:i?.newLine??`
`,useCaseSensitiveFileNames:i?.useCaseSensitiveFileNames??!1,realpath:i?.realpath,write:i?.write??(()=>{}),writeFile:i?.writeFile??(()=>{}),createDirectory:i?.createDirectory??(()=>{}),exit:i?.exit??(()=>{}),getExecutingFilePath:i?.getExecutingFilePath??(()=>r+"/__fake__.js"),getCurrentDirectory:()=>r,getModifiedTime:c,readFile:f,readDirectory:m,getDirectories:g,resolvePath:s,fileExists:x,directoryExists:a,async sync(){for(;u.size;)await Promise.all(u);return n}};function s(h){if(i){if(Ht!==r&&(Ht=r,i.directoryExists(r)))try{process.chdir(r)}catch{}return i.resolvePath(h).replace(/\\/g,"/")}return $.resolve(h).replace(/\\/g,"/")}function f(h,p){h=s(h);let b=$.dirname(h),_=F(b),C=$.basename(h);return S(h,p,_),_.files.get(C)?.text}function a(h){h=s(h);let p=F(h);if(p.exists===void 0){p.exists=!1;let b=e.fs?.stat(e.fileNameToUri(h));if(typeof b=="object"&&"then"in b){let _=b;u.add(_),b.then(C=>{u.delete(_),p.exists=C?.type===2,p.exists&&n++})}else p.exists=b?.type===2}return p.exists}function c(h){h=s(h);let p=y(h);return p.requestedStat||(p.requestedStat=!0,M(h,p)),p.stat?new Date(p.stat.mtime):new Date(0)}function x(h){h=s(h);let p=y(h),b=()=>p.text!==void 0||p.stat?.type===1;return b()?!0:(p.requestedStat||(p.requestedStat=!0,M(h,p)),b())}function M(h,p){let b=e.fs?.stat(e.fileNameToUri(h));if(typeof b=="object"&&"then"in b){let _=b;u.add(_),b.then(C=>{u.delete(_),(p.stat?.type!==C?.type||p.stat?.mtime!==C?.mtime)&&n++,p.stat=C})}else p.stat=b}function y(h){h=s(h);let p=$.dirname(h),b=$.basename(h),_=F(p),C=_.files.get(b);return C||_.files.set(b,C={}),C}function g(h){return h=s(h),O(h),[...F(h).dirs.entries()].filter(([b,_])=>_.exists).map(([b])=>b)}function m(h,p,b,_,C){h=s(h);let w=(0,jr.matchFiles)(h,p,b,_,i?.useCaseSensitiveFileNames??!1,r,C,A=>{A=s(A),O(A);let P=F(A);return{files:[...P.files.entries()].filter(([D,T])=>T.stat?.type===1).map(([D])=>D),directories:[...P.dirs.entries()].filter(([D,T])=>T.exists).map(([D])=>D)}},i?.realpath?A=>i.realpath(A):A=>A);return[...new Set(w)]}function S(h,p,b){let _=$.basename(h),C=b.files.get(_);if(C||b.files.set(_,C={}),C.requestedText)return;C.requestedText=!0;let w=e.fileNameToUri(h),A=e.fs?.readFile(w,p);if(typeof A=="object"&&"then"in A){let P=A;u.add(P),A.then(D=>{u.delete(P),D!==void 0&&(C.text=D,C.stat&&C.stat.mtime++,n++)})}else A!==void 0&&(C.text=A)}function O(h){let p=F(h);if(p.requestedRead)return;p.requestedRead=!0;let b=e.fs?.readDirectory(e.fileNameToUri(h||"."));if(typeof b=="object"&&"then"in b){let _=b;u.add(_),b.then(C=>{u.delete(_),l(h,p,C)&&n++})}else l(h,p,b??[])}function l(h,p,b){b=b.filter(([C])=>C!=="."&&C!=="..");let _=!1;for(let[C,w]of b){let A=w;if(A===64){let P=e.fs?.stat(e.fileNameToUri(h+"/"+C));if(typeof P=="object"&&"then"in P){let D=P;u.add(D),P.then(T=>{if(u.delete(D),T?.type===1){let L=p.files.get(C);L||p.files.set(C,L={}),(T.type!==L.stat?.type||T.mtime!==L.stat?.mtime)&&n++,L.stat=T,L.requestedStat=!0}else if(T?.type===2){let L=v(p,C);L.exists||(L.exists=!0,n++)}})}else P&&(A=P.type)}if(A===1){let P=p.files.get(C);P||p.files.set(C,P={}),P.stat||(P.stat={type:1,mtime:0,ctime:0,size:0},_=!0)}else if(A===2){let P=v(p,C);P.exists||(P.exists=!0,_=!0)}}return _}function F(h){let p=[],b=h,_=$.basename(b),C;for(;C!==b;)C=b,p.push(_),b=$.dirname(b),_=$.basename(b);let w=o;for(let A=p.length-1;A>=0;A--){let P=p[A];w=v(w,P)}return w}function v(h,p){let b=h.dirs.get(p);return b||h.dirs.set(p,b={dirs:new Map,files:new Map}),b}}Me.createSys=kr});var Yt=j(Oe=>{"use strict";Object.defineProperty(Oe,"__esModule",{value:!0});Oe.getProgram=void 0;function qr(t,e,n,r){let i={getRootFileNames:u,emit:x,getSyntacticDiagnostics:s,getSemanticDiagnostics:f,getGlobalDiagnostics:c,getBindAndCheckDiagnostics:d};return new Proxy({},{get:(y,g)=>{if(g in i)return i[g];let m=o();return g in m?m[g]:y[g]},set:(y,g,m)=>{let S=o();return y[g]=S[g]=m,!0}});function o(){return n.getProgram()}function u(){return o().getRootFileNames().filter(y=>r.fileExists?.(y))}function d(y,g){return a(y,g,"getBindAndCheckDiagnostics")}function s(y,g){return a(y,g,"getSyntacticDiagnostics")}function f(y,g){return a(y,g,"getSemanticDiagnostics")}function a(y,g,m){if(y){let[S,O]=e.virtualFiles.getVirtualFile(y.fileName);if(S&&O)return S.capabilities.diagnostic?M(n.getProgram()?.[m](y,g)??[]):[]}return M(o()[m](y,g)??[])}function c(y){return M(o().getGlobalDiagnostics(y)??[])}function x(y,g,m,S,O){let l=o().emit(y,r.writeFile??t.sys.writeFile,m,S,O);return{emitSkipped:l.emitSkipped,emittedFiles:l.emittedFiles,diagnostics:M(l.diagnostics)}}function M(y){let g=[];for(let S of y)if(S.file!==void 0&&S.start!==void 0&&S.length!==void 0){let[O,l]=e.virtualFiles.getVirtualFile(S.file.fileName);if(O&&l){if(r.fileExists?.(l.fileName)===!1)continue;for(let[F,[v,h]]of e.virtualFiles.getMaps(O))if(v===l.snapshot){for(let p of h.toSourceOffsets(S.start))if(typeof p[1].data.diagnostic=="object"?p[1].data.diagnostic.shouldReport():p[1].data.diagnostic){for(let _ of h.toSourceOffsets(S.start+S.length,!0))if(typeof _[1].data.diagnostic=="object"?_[1].data.diagnostic.shouldReport():_[1].data.diagnostic){m(S,l.fileName,p[0],_[0],l.snapshot.getText(0,l.snapshot.getLength()));break}break}}}else{if(r.fileExists?.(S.file.fileName)===!1)continue;m(S,S.file.fileName,S.start,S.start+S.length,S.file.text)}}else S.file===void 0&&g.push(S);return g;function m(S,O,l,F,v){let h=O===S.file?.fileName?S.file:void 0;if(!h)if(v===void 0){let _=e.host.getScriptSnapshot(O);_&&(v=_.getText(0,_.getLength()))}else h=t.createSourceFile(O,v,t.ScriptTarget.Latest,void 0,t.ScriptKind.Deferred),h.originalFileName=O,h.path=O.toLowerCase(),h.resolvedPath=O.toLowerCase();let p={...S,file:h,start:l,length:F-l},b=S.relatedInformation;b&&(p.relatedInformation=M(b)),g.push(p)}}}Oe.getProgram=qr});var tn=j(re=>{"use strict";Object.defineProperty(re,"__esModule",{value:!0});re.getExternalFiles=re.searchExternalFiles=re.decorateLanguageServiceHost=void 0;var Zt=oe();function Vr(t,e,n,r){let i=0,o=new Map,u=e.readDirectory?.bind(e),d=e.resolveModuleNameLiterals?.bind(e),s=e.resolveModuleNames?.bind(e),f=e.getProjectVersion?.bind(e),a=e.getScriptSnapshot.bind(e),c=e.getScriptKind?.bind(e);u&&(e.readDirectory=(g,m,S,O,l)=>{if(m)for(let F of r)m.includes(F)||(m=[...m,...F]);return u(g,m,S,O,l)}),d?e.resolveModuleNameLiterals=(g,m,S,O,...l)=>{let F=d(g,m,S,O,...l);return g.map((v,h)=>{if(r.some(p=>v.text.endsWith(p))){let p=x(v.text,m,O,S);if(p.resolvedModule)return p}return F[h]})}:s&&(e.resolveModuleNames=(g,m,S,O,l,F)=>{let v=s(g,m,S,O,l,F);return g.map((h,p)=>{if(r.some(b=>h.endsWith(b))){let b=x(h,m,l,O);if(b.resolvedModule)return b.resolvedModule}return v[p]})}),f&&(e.getProjectVersion=()=>f()+":"+i),e.getScriptSnapshot=g=>r.some(m=>g.endsWith(m))?(y(g),o.get(g)?.snapshot):a(g),c&&(e.getScriptKind=g=>{if(r.some(m=>g.endsWith(m))){y(g);let m=o.get(g);if(m){if(m.extension.endsWith(".js"))return n.ScriptKind.JS;if(m.extension.endsWith(".jsx"))return n.ScriptKind.JSX;if(m.extension.endsWith(".ts"))return n.ScriptKind.TS;if(m.extension.endsWith(".tsx"))return n.ScriptKind.TSX}return n.ScriptKind.Deferred}return c(g)});function x(g,m,S,O){let l=n.resolveModuleName(g,m,S,{readFile(F){return e.readFile(F)},fileExists(F){return r.some(v=>F.endsWith(v+".d.ts"))?M(F.slice(0,-5)):e.fileExists(F)}},void 0,O);if(l.resolvedModule){l.resolvedModule.resolvedFileName=l.resolvedModule.resolvedFileName.slice(0,-5);let F=y(l.resolvedModule.resolvedFileName);F&&(l.resolvedModule.extension=F.extension)}return l}function M(g){return e.fileExists(g)?(n.sys.getFileSize?.(g)??e.readFile(g)?.length??0)<4*1024*1024:!1}function y(g){let m=e.getScriptVersion(g);if(m!==o.get(g)?.version){let S=e.readFile(g),O,l=".ts";if(S!==void 0){i++;let F=t.updateSource(g,n.ScriptSnapshot.fromString(S),void 0);if(F){let v=S.split(`
`).map(h=>" ".repeat(h.length)).join(`
`);(0,Zt.forEachEmbeddedFile)(F,h=>{let p=h.fileName.substring(g.length);h.kind===Zt.FileKind.TypeScriptHostFile&&(p===".d.ts"||p.match(/^\.(js|ts)x?$/))&&(l=p,v+=h.snapshot.getText(0,h.snapshot.getLength()))}),O=n.ScriptSnapshot.fromString(v)}}else t.hasSource(g)&&(i++,t.deleteSource(g));o.set(g,{version:m,snapshot:O,extension:l})}return o.get(g)}}re.decorateLanguageServiceHost=Vr;function en(t,e,n){if(e.projectKind!==t.server.ProjectKind.Configured)return[];let r=e.getProjectName(),i=t.readJsonConfigFile(r,e.readFile.bind(e)),o={useCaseSensitiveFileNames:e.useCaseSensitiveFileNames(),fileExists:e.fileExists.bind(e),readFile:e.readFile.bind(e),readDirectory:(...d)=>(d[1]=n,e.readDirectory(...d))};return t.parseJsonSourceFileConfigFileContent(i,o,e.getCurrentDirectory()).fileNames}re.searchExternalFiles=en;re.getExternalFiles=en});var nn=j(N=>{"use strict";var Ir=N&&N.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),ce=N&&N.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Ir(e,t,n)};Object.defineProperty(N,"__esModule",{value:!0});ce(wt(),N);ce(Pt(),N);ce(Xt(),N);ce(Qt(),N);ce(Yt(),N);ce(tn(),N)});var on=j((Ae,rn)=>{(function(t,e){typeof Ae=="object"&&typeof rn<"u"?e(Ae):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.sourcemapCodec={}))})(Ae,function(t){"use strict";let e=",".charCodeAt(0),n=";".charCodeAt(0),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=new Uint8Array(64),o=new Uint8Array(128);for(let g=0;g<r.length;g++){let m=r.charCodeAt(g);i[g]=m,o[m]=g}let u=typeof TextDecoder<"u"?new TextDecoder:typeof Buffer<"u"?{decode(g){return Buffer.from(g.buffer,g.byteOffset,g.byteLength).toString()}}:{decode(g){let m="";for(let S=0;S<g.length;S++)m+=String.fromCharCode(g[S]);return m}};function d(g){let m=new Int32Array(5),S=[],O=0;do{let l=s(g,O),F=[],v=!0,h=0;m[0]=0;for(let p=O;p<l;p++){let b;p=f(g,p,m,0);let _=m[0];_<h&&(v=!1),h=_,a(g,p,l)?(p=f(g,p,m,1),p=f(g,p,m,2),p=f(g,p,m,3),a(g,p,l)?(p=f(g,p,m,4),b=[_,m[1],m[2],m[3],m[4]]):b=[_,m[1],m[2],m[3]]):b=[_],F.push(b)}v||c(F),S.push(F),O=l+1}while(O<=g.length);return S}function s(g,m){let S=g.indexOf(";",m);return S===-1?g.length:S}function f(g,m,S,O){let l=0,F=0,v=0;do{let p=g.charCodeAt(m++);v=o[p],l|=(v&31)<<F,F+=5}while(v&32);let h=l&1;return l>>>=1,h&&(l=-2147483648|-l),S[O]+=l,m}function a(g,m,S){return m>=S?!1:g.charCodeAt(m)!==e}function c(g){g.sort(x)}function x(g,m){return g[0]-m[0]}function M(g){let m=new Int32Array(5),S=1024*16,O=S-36,l=new Uint8Array(S),F=l.subarray(0,O),v=0,h="";for(let p=0;p<g.length;p++){let b=g[p];if(p>0&&(v===S&&(h+=u.decode(l),v=0),l[v++]=n),b.length!==0){m[0]=0;for(let _=0;_<b.length;_++){let C=b[_];v>O&&(h+=u.decode(F),l.copyWithin(0,O,v),v-=O),_>0&&(l[v++]=e),v=y(l,v,m,C,0),C.length!==1&&(v=y(l,v,m,C,1),v=y(l,v,m,C,2),v=y(l,v,m,C,3),C.length!==4&&(v=y(l,v,m,C,4)))}}}return h+u.decode(l.subarray(0,v))}function y(g,m,S,O,l){let F=O[l],v=F-S[l];S[l]=F,v=v<0?-v<<1|1:v<<1;do{let h=v&31;v>>>=5,v>0&&(h|=32),g[m++]=i[h]}while(v>0);return m}t.decode=d,t.encode=M,Object.defineProperty(t,"__esModule",{value:!0})})});var sn=j((Re,De)=>{var Wr=Re&&Re.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};(function(t){if(typeof De=="object"&&typeof De.exports=="object"){var e=t(require,Re);e!==void 0&&(De.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=void 0;var n=function(){function s(f,a,c,x){this._uri=f,this._languageId=a,this._version=c,this._content=x,this._lineOffsets=void 0}return Object.defineProperty(s.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),s.prototype.getText=function(f){if(f){var a=this.offsetAt(f.start),c=this.offsetAt(f.end);return this._content.substring(a,c)}return this._content},s.prototype.update=function(f,a){for(var c=0,x=f;c<x.length;c++){var M=x[c];if(s.isIncremental(M)){var y=u(M.range),g=this.offsetAt(y.start),m=this.offsetAt(y.end);this._content=this._content.substring(0,g)+M.text+this._content.substring(m,this._content.length);var S=Math.max(y.start.line,0),O=Math.max(y.end.line,0),l=this._lineOffsets,F=o(M.text,!1,g);if(O-S===F.length)for(var v=0,h=F.length;v<h;v++)l[v+S+1]=F[v];else F.length<1e4?l.splice.apply(l,Wr([S+1,O-S],F,!1)):this._lineOffsets=l=l.slice(0,S+1).concat(F,l.slice(O+1));var p=M.text.length-(m-g);if(p!==0)for(var v=S+1+F.length,h=l.length;v<h;v++)l[v]=l[v]+p}else if(s.isFull(M))this._content=M.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received")}this._version=a},s.prototype.getLineOffsets=function(){return this._lineOffsets===void 0&&(this._lineOffsets=o(this._content,!0)),this._lineOffsets},s.prototype.positionAt=function(f){f=Math.max(Math.min(f,this._content.length),0);var a=this.getLineOffsets(),c=0,x=a.length;if(x===0)return{line:0,character:f};for(;c<x;){var M=Math.floor((c+x)/2);a[M]>f?x=M:c=M+1}var y=c-1;return{line:y,character:f-a[y]}},s.prototype.offsetAt=function(f){var a=this.getLineOffsets();if(f.line>=a.length)return this._content.length;if(f.line<0)return 0;var c=a[f.line],x=f.line+1<a.length?a[f.line+1]:this._content.length;return Math.max(Math.min(c+f.character,x),c)},Object.defineProperty(s.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),s.isIncremental=function(f){var a=f;return a!=null&&typeof a.text=="string"&&a.range!==void 0&&(a.rangeLength===void 0||typeof a.rangeLength=="number")},s.isFull=function(f){var a=f;return a!=null&&typeof a.text=="string"&&a.range===void 0&&a.rangeLength===void 0},s}(),r;(function(s){function f(x,M,y,g){return new n(x,M,y,g)}s.create=f;function a(x,M,y){if(x instanceof n)return x.update(M,y),x;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s.update=a;function c(x,M){for(var y=x.getText(),g=i(M.map(d),function(h,p){var b=h.range.start.line-p.range.start.line;return b===0?h.range.start.character-p.range.start.character:b}),m=0,S=[],O=0,l=g;O<l.length;O++){var F=l[O],v=x.offsetAt(F.range.start);if(v<m)throw new Error("Overlapping edit");v>m&&S.push(y.substring(m,v)),F.newText.length&&S.push(F.newText),m=x.offsetAt(F.range.end)}return S.push(y.substr(m)),S.join("")}s.applyEdits=c})(r||(e.TextDocument=r={}));function i(s,f){if(s.length<=1)return s;var a=s.length/2|0,c=s.slice(0,a),x=s.slice(a);i(c,f),i(x,f);for(var M=0,y=0,g=0;M<c.length&&y<x.length;){var m=f(c[M],x[y]);m<=0?s[g++]=c[M++]:s[g++]=x[y++]}for(;M<c.length;)s[g++]=c[M++];for(;y<x.length;)s[g++]=x[y++];return s}function o(s,f,a){a===void 0&&(a=0);for(var c=f?[a]:[],x=0;x<s.length;x++){var M=s.charCodeAt(x);(M===13||M===10)&&(M===13&&x+1<s.length&&s.charCodeAt(x+1)===10&&x++,c.push(a+x+1))}return c}function u(s){var f=s.start,a=s.end;return f.line>a.line||f.line===a.line&&f.character>a.character?{start:a,end:f}:s}function d(s){var f=u(s.range);return f!==s.range?{newText:s.newText,range:f}:s}})});var un=j(fe=>{"use strict";var zr=fe&&fe.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fe,"__esModule",{value:!0});fe.astro2tsx=void 0;var Kr=require("@astrojs/compiler/sync"),Ur=on(),an=oe(),cn=zr(require("node:path")),fn=sn();function Br(t,e){try{return(0,Kr.convertToTSX)(t,{filename:e.filename})}catch(n){return console.error(`There was an error transforming ${e.filename} to TSX. An empty file will be returned instead. Please create an issue: https://github.com/withastro/language-tools/issues
Error: ${n}.`),{code:"",map:{file:e.filename??"",sources:[],sourcesContent:[],names:[],mappings:"",version:0},diagnostics:[{code:1e3,location:{file:e.filename,line:1,column:1,length:t.length},severity:1,text:"The Astro compiler encountered an unknown error while parsing this file. Please create an issue with your code and the error shown in the server's logs: https://github.com/withastro/language-tools/issues"}]}}}function Nr(t,e,n){let r=Br(t,{filename:e});return{virtualFile:$r(t,r,e,n),diagnostics:r.diagnostics}}fe.astro2tsx=Nr;function $r(t,e,n,r){e.code=Gr(e.code,n);let i=(0,Ur.decode)(e.map.mappings),o=fn.TextDocument.create(n,"astro",0,t),u=fn.TextDocument.create(n+".tsx","typescriptreact",0,e.code),d=[],s;for(let a=0;a<i.length;a++)for(let c of i[a]){let x=c[0],M=u.offsetAt({line:a,character:x});if(s){let y=M-s.genOffset,g=t.substring(s.sourceOffset,s.sourceOffset+y),m=e.code.substring(s.genOffset,s.genOffset+y);if(g!==m){y=0;for(let S=0;S<M-s.genOffset&&g[S]===m[S];S++)y=S+1}if(y>0){let S=d.length?d[d.length-1]:void 0;S&&S.generatedRange[1]===s.genOffset&&S.sourceRange[1]===s.sourceOffset?(S.generatedRange[1]=s.genOffset+y,S.sourceRange[1]=s.sourceOffset+y):d.push({sourceRange:[s.sourceOffset,s.sourceOffset+y],generatedRange:[s.genOffset,s.genOffset+y],data:an.FileRangeCapabilities.full})}s=void 0}if(c[2]!==void 0&&c[3]!==void 0){let y=o.offsetAt({line:c[2],character:c[3]});s={genOffset:M,sourceOffset:y}}}let f=r.createSourceFile("/a.tsx",e.code,r.ScriptTarget.ESNext);return f.statements[0]&&d.push({sourceRange:[0,t.length],generatedRange:[f.statements[0].getStart(f),e.code.length],data:{}}),{fileName:n+".tsx",kind:an.FileKind.TypeScriptHostFile,capabilities:{codeAction:!0,documentFormatting:!1,diagnostic:!0,documentSymbol:!0,inlayHint:!0,foldingRange:!0},codegenStacks:[],snapshot:{getText:(a,c)=>e.code.substring(a,c),getLength:()=>e.code.length,getChangeRange:()=>{}},mappings:d,embeddedFiles:[]}}function Gr(t,e){let n=cn.default.basename(e,cn.default.extname(e)),r=n.startsWith("[")&&n.endsWith("]");return t.replace(/\b(\S*)__AstroComponent_/gm,(i,o)=>o?r?`_${o}_`:o[0].toUpperCase()+o.slice(1):n==="404"?"FourOhFour":i)}});var ln=j(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.AstroFile=ue.getLanguageModule=void 0;var et=oe(),Jr=un();function Xr(t){return{createVirtualFile(e,n){if(e.endsWith(".astro"))return new Te(e,n,t)},updateVirtualFile(e,n){e.update(n)}}}ue.getLanguageModule=Xr;var Te=class{constructor(e,n,r){this.sourceFileName=e,this.snapshot=n,this.ts=r,this.kind=et.FileKind.TextFile,this.capabilities=et.FileCapabilities.full,this.codegenStacks=[],this.fileName=e,this.onSnapshotUpdated()}update(e){this.snapshot=e,this.onSnapshotUpdated()}onSnapshotUpdated(){this.mappings=[{sourceRange:[0,this.snapshot.getLength()],generatedRange:[0,this.snapshot.getLength()],data:et.FileRangeCapabilities.full}],this.embeddedFiles=[];let e=(0,Jr.astro2tsx)(this.snapshot.getText(0,this.snapshot.getLength()),this.fileName,this.ts);this.embeddedFiles.push(e.virtualFile)}};ue.AstroFile=Te});var Hr=oe(),tt=nn(),Qr=ln(),nt=new WeakMap,Yr=t=>{let{typescript:e}=t;return{create(r){let i=(0,Hr.createVirtualFiles)([(0,Qr.getLanguageModule)(e)]);(0,tt.decorateLanguageService)(i,r.languageService,!0),(0,tt.decorateLanguageServiceHost)(i,r.languageServiceHost,e,[".astro"]);let o=r.languageServiceHost.getScriptKind?.bind(r.languageServiceHost.getScriptKind);return o&&(r.languageServiceHost.getScriptKind=u=>u.endsWith(".astro")?e.ScriptKind.TS:o(u)),r.languageService},getExternalFiles(r){return nt.has(r)||nt.set(r,(0,tt.getExternalFiles)(e,r,[".astro"])),nt.get(r)}}};module.exports=Yr;
